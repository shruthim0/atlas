---
layout: base
permalink: /facts/
title: UCFacts
---

<html>
<head>
    <title>Search Functionality</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            // Define the search function
            function search() {
                var searchTerm = $('#searchInput').val();

                // Make an AJAX request to your Flask route to fetch the search results
                $.ajax({
                    type: 'GET',
                    url: '/search',
                    data: { term: searchTerm },
                    success: function(response) {
                        // Replace the table body with the updated search results
                        $('#tableBody').html(response);
                    },
                    error: function(xhr, status, error) {
                        console.error(error);
                    }
                });
            }

            // Bind the search function to the search button click event
            $('#searchButton').click(search);

            // Bind the search function to the Enter key press event in the search input
            $('#searchInput').keypress(function(event) {
                if (event.keyCode === 13) {
                    search();
                }
            });
        });
    </script>
</head>
<body>
    <input type="text" id="searchInput" placeholder="Search...">
    <button id="searchButton">Search</button>
<br>
<br>
    <table>
        <thead>
            <tr>
                <th>School</th>
                <th> Fun Facts</th>
            </tr>
        </thead>
    </table>
</body>
</html> 

<script>
          
    {const btnfind = document.getElementById("search_button");
          btnfind.addEventListener('click', (event) => {
          console.log("Find Clicked!");
          clearTable();
         
          var fact_school_value = school_filter.value;
          var fact_fact_value = fact_filter.value;  //sets variable to the value of the filter that the user selects


          var fact_list = getFactResults(fact_school_value, fact_fact_value); //setting dealership_list to the result gotten in the function getDealershipResults


          console.log("Filtered facts retrieved!");
          console.log(facts_list);
          console.log("Creating table!");


          for (const fact of fact_list) {
            console.log(fact);


            const tr = document.createElement("tr");


            const school_ele = document.createElement("td");
            school_ele.innerHTML = fact.school;


            const fact_ele = document.createElement("td");
            fact_ele.innerHTML = fact.fact;


            // this builds ALL td's (cells) into tr element
            tr.appendChild(school_ele);
            tr.appendChild(fact_ele);


            resultContainer.appendChild(tr);
          }
    });

    function clearTable() {
        var tableRows = resultContainer.getElementsByTagName('tr');
        var rowCount = tableRows.length;
        for (var x=rowCount-1; x>=0; x--) {
            resultContainer.removeChild(tableRows[x]);
        }

    }

      function getFactResults 
        fetch('https://atlasnow.duckdns.org/api/facts/').then(function(response) {
                return response.json();
            }).then(function(data) {
                console.log(data);
                all_dealerships = data;
            }).catch(function(err) {
                console.log(err);
            });
    }

      function getFactResults(school, fact) {
        var result = [];
        for (const fact of all_facts){
              console.log(fact);

            if ((fact["school"] === school || !school) &&
                (fact)["fact"] === fact || !fact) {
                result.push(fact);
            }

        }
        return result;
      }
</script>
          